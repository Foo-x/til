# 楽観ロックと悲観ロック

- 楽観ロック
    - 取得時のデータと更新時のデータが同じであることを確認してから更新する
    - 同じであることを検証するためにバージョンなどを管理するカラムが必要
        - タイムスタンプは同じ値になる可能性があるので△
    - 競合が発生した場合はプログラム側でやり直す処理が必要
- 悲観ロック
    - データそのものをロックし、あるクライアントの取得から更新のあいだに他のクライアントが同時に取得できないようにする
    - ロックされている間はそもそも取得できないので、競合は発生しない

基本は楽観ロックを使い、取得から更新までが長い場合や、頻繁に更新される場合は悲観ロックを使う
