# コマンドラインモードのマイナーコマンド

## Exコマンド

- `:ju[mps]`
    - ジャンプリストを表示
- `:cle[arjumps]`
    - ジャンプリストをクリア
- `:changes`
    - 変更リストを表示
- `:norm[al][!] {commands}`
    - ノーマルモードで {commands} を実行する
    - `!` を付けるとkeymapを反映させない
- `:exe[cute] {expr}`
    - {expr} をExコマンドとして実行
    - 特殊キーを含むノーマルモードのコマンドは `:norm` で実行できないが、`:exe "norm \<C-l>"` のようにすると実行できる


### 範囲指定

- `:{number}`
    - 行番号
- `:.`
    - 現在行
- `:%`
    - ファイル全体
- `:/{pattern}/`
    - {pattern} にマッチする行
- `:{range};{range}`
    - 1つ目の {range} にマッチする行から2つ目の {range} にマッチする行
- `:{range}+{number}`
    - {range} より {number} 行だけ後の行
    - {number} は省略可能で、その場合は1と同じになる
- `:{range}-{number}`
    - {range} より {number} 行だけ前の行
    - {number} は省略可能で、その場合は1と同じになる


### グローバルコマンド

- `:{range}g[lobal]/{pattern}/{cmd}`
    - {range} の範囲で {pattern} にマッチする行に対して、{cmd} のExコマンドを実行する
    - {cmd} は省略可能で、その場合は `p` と同じになる
    - 例
        - 特定の文字列を含む行の末尾に特定の文字列を挿入したい場合
            - `:g/foo/norm A bar` や `:g/foo/s/$/ bar/`
            - グローバルコマンドを使わない場合、`:%s/\v(foo.+)/\1 bar/` と置換する方法もある
        - 特定の文字列を含む行を削除
            - `:g/foo/d`
            - グローバルコマンドを使わない場合、`:%s/\v^.+foo.+\n//` と置換する方法もある
        - 特定のパターンにマッチする行のみ置換
            - たとえば下のコードでdivタグの `old` のみを `new` に置換したいときは `:g/div/s/old/new/`
            ```
            <div className="oldClass">Content1</div>
            <span className="oldClass">Content2</span>
            <div className="oldClass">Content3</div>
            ```
            - グローバルコマンドを使わない場合、`:%s/\v(div.+)old/\1new/` のようになる
- `:{range}g[lobal]!/{pattern}/{cmd}`
    - {range} の範囲で {pattern} にマッチしない行に対して、{cmd} のExコマンドを実行する
    - {cmd} は省略可能で、その場合は `p` と同じになる
- `:{range}v[global]/{pattern}/{cmd}`
    - `:g!` と同じ
