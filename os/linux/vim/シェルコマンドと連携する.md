# シェルコマンドと連携する

- カーソル位置の行を入力として渡し、出力で置換
    - ノーマルモードから `!!` で `:.!` になる
    - `:.!command`
- 選択範囲を入力として渡し、出力で置換
    - ビジュアルモードから `!` で `:'<,'>!` になる
    - `:'<,'>!command`
- 入力を渡さずにカーソル位置の下の行に挿入
    - `:r !command`
    - `:r` 後の空白は省略可
- 指定範囲を入力として渡して実行
    - `:{range}w !command`
    - {range} を指定しない場合はファイル全体
    - `w` 後の空白は省略不可
        - `:w!` はファイル名を指定して上書きする別のコマンド

使い方例

- 編集中の JavaScript ファイルを実行
    1.  `:w !node`
- Markdownの複数行のコードブロック内のシェルコマンドを実行
    1. コードブロック内をビジュアルモードで選択
    2. `:'<,'>w !sh`
        - ビジュアルモードから `:` で `:'<,'>` になる
- Markdownの1行のコードブロック内のPythonコマンドを実行
    1. コードブロック内にカーソルを置いて `:.w !python` を実行
- 一括リネーム
    1. `:r!ls foo_*.txt` でファイル一覧を挿入
    2. 矩形編集で各行を `mv` でリネームするコマンドに変更
    3. `:w !sh` で実行
- 保存されているファイルとバッファとの差分を表示
    1. `:w !diff % -`
