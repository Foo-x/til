# netrwでよく使うコマンド

## 移動系

- `Enter` (`<CR>`)
    - ファイルの場合は開く
    - フォルダの場合は移動する
- `o`
    - ファイル・ディレクトリを水平分割の新しいウィンドウで開く
- `v`
    - ファイル・ディレクトリを垂直分割の新しいウィンドウで開く
- `-`
    - 1つ上のディレクトリに移動する
- `u`
    - 1つ前のディレクトリに移動する
- `U`
    - 1つ後のディレクトリに移動する


## 操作系

- `t`
    - 新しいタブで開く
- `%`
    - ファイルを作成して開く
- `d`
    - ディレクトリを作成する
- `D`
    - ファイル・ディレクトリを削除する
    - ディレクトリは空のときのみ削除可能
- `R`
    - ファイル・ディレクトリの名前を変更する


## 表示系

- `i`
    - 表示形式を変更する
- `s`
    - ソート方法を変更する
- `r`
    - ソートを逆順にする
- `a`
    - 以下を順に切り替える
        - すべて表示
        - 隠しリストにマッチするものを非表示
        - 隠しリストにマッチするもののみ表示
    - ファイルをマークしている状態で実行すると、マークしているファイルを隠しリストに登録/解除したうえで表示方法を切り替える
- `gn`
    - ツリー表示のルートディレクトリをカーソル位置にする
- `qf`
    - ファイル・ディレクトリの詳細情報を表示する
- `<C-l>`
    - 画面を再描画


## マーク系

- `mf`
    - ファイル・ディレクトリのマークを切り替える
- `mr`
    - 正規表現でファイル・ディレクトリのマークを切り替える
- `V`
    - 行選択
- `mu`
    - すべてのマークを解除する
- `mt`
    - カーソル位置がファイルの場合はカレントディレクトリをターゲットディレクトリにする
    - カーソル位置がディレクトリの場合はそのディレクトリをターゲットディレクトリにする
- `mc`
    - マークしたファイル・ディレクトリをターゲットディレクトリにコピーする
- `mm`
    - マークしたファイル・ディレクトリをターゲットディレクトリに移動する
- `mx`
    - マークしたファイル・ディレクトリにそれぞれシェルコマンドを実行する
    - たとえば `file1` と `file2` をマークして `command` を実行すると、`command file1` と `command file2` が実行される
- `mX`
    - マークしたファイル・ディレクトリに一括でシェルコマンドを実行する
    - たとえば `file1` と `file2` をマークして `command` を実行すると、`command file1 file2` が実行される
- `mh`
    - マークしたファイルのファイル名と拡張子を隠しリストに登録/解除する
- `gh`
    - 隠しリストにドットファイルを登録/解除する
- `<C-h>`
    - 隠しリストを編集する
- `mz`
    - マークしたファイルを圧縮/解凍する


## ブックマーク系

- `qb`
    - ブックマークと履歴を表示する
- `mb`
    - マークしたファイル・ディレクトリをブックマークする
    - マークしていない場合はカレントディレクトリをブックマークする
- `<cnt>gb`
    - `<cnt>` で指定した番号のブックマークに移動する
    - `<cnt>` を指定しない場合、最新のブックマークに移動する
- `<cnt>mB`
    - `<cnt>` で指定した番号のブックマークを削除する
    - `<cnt>` を指定しない場合、最新のブックマークを削除する


## 起動方法

- シェルから
    - `vim <ディレクトリ>`
- vimから
    - `:e <ディレクトリ>`
        - カレントバッファで開く
        - カレントバッファが保存されていない場合はエラー
    - `:E [<ディレクトリ>]`
        - カレントバッファで開く
        - カレントバッファが保存されていない場合は別ウィンドウで開く
    - `:Te [<ディレクトリ>]`
        - 新しいタブで開く
    - `:Le [<ディレクトリ>]`
        - 垂直分割して左側に開く


## Tips

- ファイル・ディレクトリをコピー・移動したいときは、2画面ファイラのようにすると楽
    1. `v` や `:vsplit` などで2画面にする
    2. 片方でコピー・移動先に移動してから `mt` でターゲットディレクトリにする
    3. もう片方でコピー・移動元をマークする
    4. `mc` や `mm` でコピー・移動する
    - ただ、シェルのコマンドから実行したほうが速いことのほうが多い
        - 基本はあくまでvimで開くファイルのブラウズ用に使う
        - ファイル・ディレクトリの作成・削除・リネーム程度であればNetrwでも十分
- 空でないディレクトリを削除したいときは `mf` でマークしてから `mx` で `rm -rf` とシェルコマンドを実行すれば良い
    - もしくは独自の関数で `D` を上書きする
        - https://github.com/Foo-x/dotfiles/blob/27498092a1e70798676008389e68dcdcef12742e/.vimrc#L81-L95
- パスを指定してディレクトリを移動したい場合はvimから起動するときと同様に `:e <ディレクトリ>` とすれば良い
    - パスが分かっているときや深い階層に1回で入りたいときなどに便利
