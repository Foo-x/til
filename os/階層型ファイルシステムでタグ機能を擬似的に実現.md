# 階層型ファイルシステムでタグ機能を擬似的に実現

タグをサポートしていないファイルシステムでも、以下のようにすることで擬似的にタグ機能を実現できる。

まずタグごとに対応するフォルダを作り、各操作を以下のように置き換える。

| タグの操作 | 実際の操作 |
| --- | --- |
| ファイルにタグを付ける | 対応するフォルダ内にハードリンクを作成する |
| ファイルからタグを外す | 対応するフォルダ内のファイルを削除する |
| タグで検索 | 対応するフォルダを開く |

Unixでは `ln`、Windowsでは `makelink /h` でハードリンクを作成できる。

コピーではなくハードリンクを使う理由は以下の通り。

- どのタグのフォルダからファイルを開いて編集しても他のリンクに反映されるため
    - コピーは実体が分かれるので、他のファイルに反映されない
- リンクを増やしても消費する容量が増えないため
    - コピーは実体が分かれるので、タグを複数付けるとその分だけ容量を消費する

シンボリックリンクではなくハードリンクを使う理由は以下の通り。

- 元のファイルを移動したりファイル名を変更したりしてもリンクが外れないため
    - シンボリックリンクはパスでリンクしているため、元のファイルのパスが変わるとリンクが外れる

なお、複数のタグで検索することは不可能。  
また、元のファイルを削除しても各タグのフォルダ内にはファイルが残るので、すべて削除したい場合はそれぞれ削除する必要がある。
