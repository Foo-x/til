# シンボリックリンクとハードリンクの違い

元のファイルAがあるとき、以下のようなイメージ。

```
ファイルAのパス
  |
ハードリンク
  |
  v
実体のinode
  |
  v
実体
```

以下、ファイルAに対してそれぞれのリンクを貼ったファイルBを作成したとする。


## シンボリックリンク

```
ファイルBのパス
  |
シンボリックリンク
  |
  v
ファイルAのパス
  |
ハードリンク
  |
  v
実体のinode
  |
  v
実体
```

- シンボリックリンクはパスを指す
- ファイルAの名前が変わったり削除されたりすると、デッドリンクになる
- 別のパーティション（ボリューム）に対しても貼ることができる


## ハードリンク

```
ファイルAのパス
  |
ハードリンク
  |
  v
実体のinode <-- ハードリンク --ファイルBのパス
  |
  v
実体
```

- ハードリンクは実体のinodeを指す
- ファイルAとファイルBは名前の変更や削除をしても互いに影響を受けない
- ファイルAとファイルBは内容の変更によって互いに影響を受ける
- パーティション（ボリューム）をまたげない


## 使い分け

```
if ファイルの変更の影響を受けたくない:
    コピー
elif 同じパーティション and 元ファイルの名前を変更したり削除したりしても参照し続けたい:
    ハードリンク
else:
    シンボリックリンク
```

たとえば複数のユーザがファイルを共有して、全員が不要になったタイミングで削除したいときなどはハードリンクが便利。  
まず元ファイルを任意のユーザに作り、他のユーザからハードリンクを貼れば、誰がどのタイミングで削除しても他のユーザには影響が出ず、全員が削除すれば実体も同時に消える。

シンボリックリンクの場合、元ファイルを持つユーザが削除すると他のユーザにデッドリンクが残ってしまう。  
別の場所に元ファイルを置いて、全ユーザからシンボリックリンクを貼るようにした場合はその問題が起きないが、全員が削除した後も元ファイルが残る。
