# ハミング符号

誤り訂正符号のひとつ。1bitの誤り訂正ができる。

整数mに対し、

- 符号長: n = 2^m - 1
- 情報数: k = n - m

になる。符号長は元の情報ビットに符号ビットを加えた全体の長さで、情報数は元の情報の長さのこと。

---

4bitの `1001` にハミング符号を適用する例

- n = 2^m - 1
- 4 = n - m

を満たす整数 (n, m) の組は (7, 3)。よって3ビットの符号ビットを加える。

情報ビットの各ビットを x1, x2, x3, x4、符号ビットを c1, c2, c3 としたとき、各符号ビットを以下のように計算する。

- c1 = x1 + x2 + x3
- c2 = x1 + x2 + x4
- c3 = x2 + x3 + x4

なお、計算方法は別の式でもOK。

情報ビットが1001のとき、

- c1 = 1 + 0 + 0 = 1
- c2 = 1 + 0 + 1 = 0
- c3 = 0 + 0 + 1 = 1

よって符号は 1001101 になる。  
誤り訂正時は以下の値を計算する。

- s1 = x1 + x2 + x3 + c1
- s2 = x1 + x2 + x4 + c2
- s3 = x2 + x3 + x4 + c3

受け取った値に対して、

- 誤りがない場合
    - s1 = 1 + 0 + 0 + 1 = 0
    - s2 = 1 + 0 + 1 + 0 = 0
    - s3 = 0 + 0 + 1 + 1 = 0
- x1が誤っている場合
    - s1 = 0 + 0 + 0 + 1 = 1
    - s2 = 0 + 0 + 1 + 0 = 1
    - s3 = 0 + 0 + 1 + 1 = 0
- x2が誤っている場合
    - s1 = 1 + 1 + 0 + 1 = 1
    - s2 = 1 + 1 + 1 + 0 = 1
    - s3 = 1 + 0 + 1 + 1 = 1
- x3が誤っている場合
    - s1 = 1 + 0 + 1 + 1 = 1
    - s2 = 1 + 0 + 1 + 0 = 0
    - s3 = 0 + 1 + 1 + 1 = 1
- x4が誤っている場合
    - s1 = 1 + 0 + 0 + 1 = 0
    - s2 = 1 + 0 + 0 + 0 = 1
    - s3 = 0 + 0 + 0 + 1 = 1
- c1が誤っている場合
    - s1 = 1 + 0 + 0 + 0 = 1
    - s2 = 1 + 0 + 1 + 0 = 0
    - s3 = 0 + 0 + 1 + 1 = 0
- c2が誤っている場合
    - s1 = 1 + 0 + 0 + 1 = 0
    - s2 = 1 + 0 + 1 + 1 = 1
    - s3 = 0 + 0 + 1 + 1 = 0
- c3が誤っている場合
    - s1 = 1 + 0 + 0 + 1 = 0
    - s2 = 1 + 0 + 1 + 0 = 0
    - s3 = 0 + 0 + 1 + 0 = 1

となり、(s1, s2, s3) の組み合わせが一意に定まるため、誤りの訂正が可能になる。  
誤りがない場合と異なる値になった式に含まれるビットが誤りビットである。（たとえばs1とs2が1でs3が0になった場合、s1とs2に含まれてs3に含まれないビットはx1であることから、x1が誤りビットだとわかる）

なお、2bitの誤りを検出することはできるが、訂正することはできない。
