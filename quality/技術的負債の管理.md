# 技術的負債の管理

技術的負債とは、ユーザからは見えないが、開発にネガティブな影響を与えている技術的な問題を指す。

以下の手順で管理する。

1. 負債に気づく
    - どのような負債があるのか知っておくことが重要（後述）
2. 何が問題なのか整理する
    - 数値化できるとステークホルダを説得しやすいのでなお良い
    - 開発者のモチベーションが下がるなど定性的な問題もある
3. 解消する方法を考える
4. その方法にかかるコストを見積もる
    - 一般的に負債を放置するほどコストが大きくなっていくことに注意
5. 重要度・緊急度で優先順位を付ける
    - ここで重要度も緊急度も低かったものは対応しない選択肢もある
    - 多くの開発者が関わる箇所や頻繁に変更される箇所は解消することのリターンが大きいので重要度が高い
        - たとえば頻繁に変更されるファイルの複雑度を下げるとバグが入りにくくなる
        - 逆に、ほとんど変更されないファイルの複雑度を下げてもあまり効果がない
6. 計画を立てる
7. 解消する
8. 解消した効果を測定する

負債の例

- 情報管理
    - 情報を探しにくい
        - grepabilityが低い
            - [grepability](./grepability.md) も参照
        - 過度な抽象化によって検索しても引っかからなかったり、情報を追うのに何階層もかかったりする
        - 複数の箇所に情報が散らばっている
    - 情報が属人化している
    - ドキュメントがない、古い
    - 不要な情報が残っている
    - 同じ意味の用語が揺れている
    - バックログが管理されていない
- 運用
    - 言語・フレームワーク・ライブラリのバージョンが古い
    - メンテナンスされていないフレームワーク・ライブラリを使っている
    - 情報の少ないフレームワーク・ライブラリを使っている
    - 自動整形ツールが導入されていない
    - ビルド・デプロイに時間がかかる
    - レビューに時間がかかる
        - 1つのブランチで複数の課題に対応している
        - レビュアーとレビュイーのバランスが合っていない
        - 複数のメンバーが同じ箇所を修正して衝突している
    - 本番環境とステージング環境が隔離されていない
    - デプロイ手順が整備されていない
    - 障害発生時の対応手順が整備されていない
    - 必要十分なログが出力されていない
    - バックアップが保存されていない
    - タグ付けやバージョン管理がされていない
- 設計
    - プロダクトの規模にアーキテクチャが合っていない
    - 同じ実装が複数箇所に存在する
    - モジュールの結合度が高い
    - モジュールの凝集度が低い
    - 不安定なモジュールに依存している
    - 依存が循環している
    - 1つのモジュール・クラス・関数で複数の機能を実装している
    - モジュール・クラス・関数・変数が適切に命名されていない
    - 副作用が分離されていない
    - 可視性が適切に設定されていない
    - テーブルが正規化されていない
- 実装
    - 不要なコードが残っている
    - 必要十分なコメントがない
    - マジックナンバー・マジックワードがある
    - 変数が不必要にミュータブルになっている
    - 例外が適切に処理されていない
    - 外部入力が適切にバリデーションされていない
- テスト
    - テストがない、通らない
    - カバレッジが低い
    - テストに時間がかかる
    - 適切に構造化されていない
    - テストが適切に命名されていない
    - ロジックが含まれる
    - 1つのテストで複数の検証をしている

参考

- [技術的負債を管理するテクニック｜yuta_tezuka](https://note.com/yuta_tezuka/n/n75038690652d)
- [技術的負債とどうやって戦うか #JavaScript - Qiita](https://qiita.com/kamykn/items/ad687e772da454e3f614)
- [技術的負債：基礎知識と6つのベストプラクティス｜LTS Group](https://ltsgroup.tech/jp/blog/technical-debt/)
- [技術的負債の解決案について｜小谷田 洋一 / Yoichi Koyata](https://note.com/kotanita_note/n/n4487b8cdbaa8)
