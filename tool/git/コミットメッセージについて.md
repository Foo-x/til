# コミットメッセージについて

## テンプレート

configの`commit.template`にパスを指定すると、`git commit`を実行したときに、そのファイルの内容がコミットメッセージに入力された状態でエディタが起動する。  
なお、`-t`オプションで動的に指定することも可能。


## 入力

`git commit`のオプションで入力を変更できる。

- 何も指定しない
    - エディタが起動する
    - 起動するエディタは環境変数の`VISUAL`か`EDITOR`に設定されているもの（以下同様）
- `-m <string>`
    - 文字列
    - エディタは起動しない
    - `-m foo -m bar`のように複数指定した場合は空行区切りで結合される
- `-F <file>`
    - ファイル
    - `-F-`で標準入力（シェルの仕様）
    - エディタは起動しない
- `-t <file>`
    - ファイル
    - エディタが起動する
- `-C <SHA>`
    - コミットメッセージ
    - エディタは起動しない
- `-c <SHA>`
    - コミットメッセージ
    - エディタが起動する


## フック

- prepare-commit-msg
    - エディタが起動する前にコミットメッセージを編集する
    - 3つの引数がある
        1. コミットメッセージが記入されたファイルのパス
        2. コミットメッセージのソース
            - message: `-m`, `-F`
            - template: テンプレートが使用されたとき
            - squash: `--squash`
            - commit: `-C`, `-c`, `--amend`
        3. SHA（ソースが`commit`の場合）
    - 第1引数のファイルを書き換えることで編集可能
- commit-msg
    - 最終的なコミットメッセージを編集する
    - 1つの引数でコミットメッセージが記入されたファイルのパスが渡される
    - 引数のファイルを書き換えることで編集可能
