# Webサーバを置く理由

現代のWebフレームワークはサーバを組み込んでいることがほとんどだが、本番環境ではApacheやNginxといったWebサーバを前段に置くことが多い。  
理由は以下の通り。

- Webサーバとしての役割に特化しているので、フレームワークに組み込まれているものよりパフォーマンスが良い
- 静的コンテンツをWebサーバに任せることでアプリの負荷が減る
- 攻撃を受けたときのリスクが大きいアプリをプライベートなネットワークに置き、Webサーバのみをパブリックにすることでセキュリティが向上する
- アプリが落ちたときに静的なSorryページを返せる
- ロードバランシングできる
- Nginxの場合はC10K問題が解消される
- Nginxの場合はバッファリング機能がある
    - Nginxを置かないとクライアントの回線が遅いときに通信が完了するまでアプリのリソースが確保されたままになってしまう
    - Nginxを置くとリクエストが完了するまで待ってからアプリに接続し、レスポンスを受け取ったら接続を切ってクライアントに返すのでアプリの負荷が最小限になる
